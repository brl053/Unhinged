# UnhingedOS Runtime Artifacts

This directory contains deployable artifacts generated by the UnhingedOS build system, including VM images, bootable ISOs, and host-VM communication interfaces.

## üìÅ Directory Structure

### `images/`
**Purpose:** VM disk images (.qcow2 format)
- **`unhinged-os-minimal.qcow2`** - Minimal voice-first OS (64MB virtual)
- **`unhinged-os-desktop.qcow2`** - Full desktop environment (256MB virtual)
- **`unhinged-os-server.qcow2`** - Headless server variant (128MB virtual)
- **`unhinged-os-dev.qcow2`** - Development environment (512MB virtual)
- **`base-alpine.qcow2`** - Clean Alpine Linux base for development

### `isos/`
**Purpose:** Bootable ISO images
- **`unhinged-os-minimal.iso`** - Minimal bootable ISO
- **`unhinged-os-desktop.iso`** - Desktop environment ISO
- **`unhinged-os-server.iso`** - Server variant ISO
- **`unhinged-os-dev.iso`** - Development environment ISO
- **`alpine-unhinged-custom.iso`** - Custom Alpine with UnhingedOS pre-installed

### `shared/`
**Purpose:** Host-VM communication directory
- **`vm-to-host.txt`** - VM status messages to host
- **`host-to-vm.txt`** - Host commands to VM
- **`build-artifacts/`** - Shared build artifacts
- **`logs/`** - VM system logs
- **`config/`** - Runtime configuration files

## üéØ Image Specifications

### Minimal Image (unhinged-os-minimal.qcow2)
- **Virtual Size:** 1GB
- **Actual Size:** ~64MB compressed
- **RAM Requirement:** 64MB
- **CPU Cores:** 1
- **Boot Time:** <5 seconds
- **Use Cases:** Embedded systems, IoT, voice-only interfaces

### Desktop Image (unhinged-os-desktop.qcow2)
- **Virtual Size:** 4GB
- **Actual Size:** ~256MB compressed
- **RAM Requirement:** 256MB
- **CPU Cores:** 2
- **Boot Time:** <8 seconds
- **Use Cases:** Desktop replacement, accessibility computing

### Server Image (unhinged-os-server.qcow2)
- **Virtual Size:** 2GB
- **Actual Size:** ~128MB compressed
- **RAM Requirement:** 128MB
- **CPU Cores:** 1-2
- **Boot Time:** <6 seconds
- **Use Cases:** Voice processing backend, API servers

### Development Image (unhinged-os-dev.qcow2)
- **Virtual Size:** 8GB
- **Actual Size:** ~512MB compressed
- **RAM Requirement:** 512MB
- **CPU Cores:** 4
- **Boot Time:** <10 seconds
- **Use Cases:** OS development, debugging, research

## üöÄ Deployment

### QEMU/KVM Deployment
```bash
# Start minimal UnhingedOS
qemu-system-x86_64 \
    -m 64M \
    -smp 1 \
    -drive file=images/unhinged-os-minimal.qcow2,format=qcow2 \
    -netdev user,id=net0 \
    -device virtio-net,netdev=net0 \
    -virtfs local,path=shared,mount_tag=shared,security_model=passthrough

# Start desktop UnhingedOS
qemu-system-x86_64 \
    -m 256M \
    -smp 2 \
    -drive file=images/unhinged-os-desktop.qcow2,format=qcow2 \
    -netdev user,id=net0 \
    -device virtio-net,netdev=net0 \
    -virtfs local,path=shared,mount_tag=shared,security_model=passthrough \
    -display gtk
```

### ISO Boot
```bash
# Boot from ISO
qemu-system-x86_64 \
    -m 256M \
    -cdrom isos/unhinged-os-desktop.iso \
    -boot d
```

### Production Deployment
```bash
# Copy to production environment
scp images/unhinged-os-server.qcow2 production-host:/var/lib/libvirt/images/

# Start with libvirt
virsh start unhinged-os-server
```

## üîß Host-VM Communication

### Communication Protocol
UnhingedOS uses 9p virtio filesystem for host-VM communication through the `shared/` directory.

### VM ‚Üí Host Messages
**File:** `shared/vm-to-host.txt`
```
TIMESTAMP: STATUS_MESSAGE
2024-01-01 12:00:00: UnhingedOS boot complete
2024-01-01 12:00:01: Voice interface ready
2024-01-01 12:00:02: Graphics system initialized
```

### Host ‚Üí VM Commands
**File:** `shared/host-to-vm.txt`
```
COMMAND: PARAMETERS
shutdown: graceful
restart: voice-service
config: voice-sensitivity=high
```

### Build Artifacts Sharing
**Directory:** `shared/build-artifacts/`
- Source code updates
- Configuration changes
- Library updates
- Test results

## üìä Image Management

### Image Optimization
```bash
# Compress images for distribution
qemu-img convert -c -O qcow2 source.qcow2 compressed.qcow2

# Check image information
qemu-img info images/unhinged-os-desktop.qcow2

# Resize image if needed
qemu-img resize images/unhinged-os-dev.qcow2 +1G
```

### Image Verification
```bash
# Verify image integrity
qemu-img check images/unhinged-os-minimal.qcow2

# Test boot capability
qemu-system-x86_64 -m 64M -drive file=images/unhinged-os-minimal.qcow2 -nographic
```

### Backup and Versioning
```bash
# Create backup
cp images/unhinged-os-desktop.qcow2 images/unhinged-os-desktop-backup-$(date +%Y%m%d).qcow2

# Version management
ln -sf unhinged-os-desktop-v1.2.3.qcow2 unhinged-os-desktop.qcow2
```

## üîí Security Considerations

### Image Security
- Images are read-only by default
- No network services enabled by default
- Minimal package set to reduce attack surface
- Regular security updates through rebuild process

### Communication Security
- Host-VM communication is isolated to shared directory
- No direct network access from VM
- File permissions strictly controlled
- Audit logging of all communication

---

**UnhingedOS Runtime: Deployable artifacts for voice-first computing**
