{
  "name": "Syscall Execution Plan",
  "description": "Research a topic, write a plan, then translate to Linux kernel syscalls",
  "tags": ["syscall", "kernel", "linux", "plan", "execute", "low-level", "system"],
  "nodes": [
    {
      "id": "search",
      "type": "web_search",
      "config": {
        "query_template": "{{input.topic}} linux commands howto",
        "max_results": 5,
        "max_content_chars": 4000
      }
    },
    {
      "id": "write_plan",
      "type": "llm",
      "config": {
        "model": "mistral",
        "provider": "ollama",
        "system_prompt": "You are a Linux systems expert. Write concise, actionable plans with specific commands.",
        "input_template": "Write an execution plan for:\n\nGOAL: {{input.topic}}\n\nRESEARCH:\n{{search.text}}\n\nProvide:\n1. Step-by-step commands to run\n2. Expected output for each\n3. How to verify success\n\nPLAN:",
        "max_tokens": 1024,
        "temperature": 0.3
      }
    },
    {
      "id": "translate_syscalls",
      "type": "llm",
      "config": {
        "model": "mistral",
        "provider": "ollama",
        "system_prompt": "You are a Linux kernel internals expert. You translate user-space commands into their underlying kernel syscalls. Use ONLY ASCII formatting. Be precise and technical.",
        "input_template": "Translate this execution plan into Linux kernel syscalls.\n\nPLAN:\n{{write_plan.text}}\n\nFor each command in the plan, show:\n1. The syscall sequence (socket, connect, sendto, ioctl, etc.)\n2. Key arguments (address families, flags, structs)\n3. Data flow through the kernel\n\nFormat as ASCII diagram/table. No markdown. Pure ASCII.\n\nSYSCALL BREAKDOWN:\n```\n+------------------+----------------------+---------------------------+\n| COMMAND          | SYSCALLS             | KEY ARGS                  |\n+------------------+----------------------+---------------------------+\n```\nContinue this table for each command, then add flow diagrams.",
        "max_tokens": 2048,
        "temperature": 0.2
      }
    }
  ],
  "edges": [
    {"from": "search", "to": "write_plan"},
    {"from": "write_plan", "to": "translate_syscalls"}
  ]
}

