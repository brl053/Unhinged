<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unhinged SDK Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .panel {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #404040;
        }
        
        .panel h3 {
            margin-top: 0;
            color: #4CAF50;
            border-bottom: 1px solid #404040;
            padding-bottom: 10px;
        }
        
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        button:hover {
            background: #45a049;
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        .status {
            background: #333;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .error {
            color: #ff6b6b;
        }
        
        .success {
            color: #4CAF50;
        }
        
        .warning {
            color: #ffa726;
        }
        
        input, textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: #333;
            border: 1px solid #555;
            border-radius: 4px;
            color: #e0e0e0;
            box-sizing: border-box;
        }
        
        .tier-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üéØ Unhinged SDK Demo</h1>
    <p>Beautiful syntax sugar for system operations</p>
    
    <div class="container">
        <!-- Service Management Panel -->
        <div class="panel">
            <h3>üöÄ Service Management</h3>
            <div class="tier-buttons">
                <button onclick="startTier('infrastructure')">Start Infrastructure</button>
                <button onclick="startTier('applications')">Start Applications</button>
                <button onclick="startTier('ai_services')">Start AI Services</button>
            </div>
            <div class="tier-buttons">
                <button onclick="stopTier('infrastructure')">Stop Infrastructure</button>
                <button onclick="stopTier('applications')">Stop Applications</button>
                <button onclick="stopTier('ai_services')">Stop AI Services</button>
            </div>
            <button onclick="getServiceStatus()">üîç Check Status</button>
            <div id="service-status" class="status"></div>
        </div>
        
        <!-- File Operations Panel -->
        <div class="panel">
            <h3>üìÅ File Operations</h3>
            <input type="text" id="file-path" placeholder="/tmp/test.txt" value="/tmp/unhinged-test.txt">
            <textarea id="file-content" placeholder="File content..." rows="3">Hello from Unhinged SDK!</textarea>
            <div>
                <button onclick="writeFile()">‚úèÔ∏è Write File</button>
                <button onclick="readFile()">üìñ Read File</button>
                <button onclick="checkFileExists()">‚ùì File Exists?</button>
                <button onclick="deleteFile()">üóëÔ∏è Delete File</button>
            </div>
            <div id="file-output" class="status"></div>
        </div>
        
        <!-- Network Operations Panel -->
        <div class="panel">
            <h3>üåê Network Operations</h3>
            <input type="text" id="ping-host" placeholder="Host to ping" value="google.com">
            <button onclick="pingHost()">üèì Ping Host</button>
            
            <input type="text" id="curl-url" placeholder="URL to curl" value="https://httpbin.org/json">
            <button onclick="curlUrl()">üåç Curl URL</button>
            
            <div id="network-output" class="status"></div>
        </div>
        
        <!-- System Info Panel -->
        <div class="panel">
            <h3>üíª System Information</h3>
            <button onclick="getSystemInfo()">üìä System Info</button>
            <button onclick="getSystemResources()">üìà Resource Usage</button>
            <button onclick="listDirectory()">üìÇ List /tmp</button>
            <div id="system-output" class="status"></div>
        </div>
    </div>
    
    <!-- Global Status -->
    <div class="panel" style="margin-top: 20px;">
        <h3>üìã Activity Log</h3>
        <button onclick="clearLog()">üßπ Clear Log</button>
        <div id="activity-log" class="status" style="max-height: 300px;"></div>
    </div>

    <script src="unhinged-sdk.js"></script>
    <script>
        // Initialize the Unhinged SDK
        const unhinged = new UnhingedSDK({
            baseUrl: 'http://localhost:9000',
            timeout: 30000
        });
        
        // Utility functions
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('activity-log');
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : type === 'warning' ? 'warning' : '';
            logElement.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('activity-log').innerHTML = '';
        }
        
        // Service Management Functions
        async function startTier(tier) {
            try {
                log(`Starting ${tier} tier...`);
                const result = await unhinged.service.start(tier);
                log(`‚úÖ ${tier} tier started successfully`, 'success');
                console.log('Start result:', result);
            } catch (error) {
                log(`‚ùå Failed to start ${tier}: ${error.message}`, 'error');
                console.error('Start error:', error);
            }
        }
        
        async function stopTier(tier) {
            try {
                log(`Stopping ${tier} tier...`);
                const result = await unhinged.service.stop(tier);
                log(`üõë ${tier} tier stopped successfully`, 'success');
                console.log('Stop result:', result);
            } catch (error) {
                log(`‚ùå Failed to stop ${tier}: ${error.message}`, 'error');
                console.error('Stop error:', error);
            }
        }
        
        async function getServiceStatus() {
            try {
                log('Checking service status...');
                const status = await unhinged.service.status();
                
                const statusElement = document.getElementById('service-status');
                statusElement.innerHTML = `
                    <strong>Running Services:</strong><br>
                    ${status.running_services?.join(', ') || 'None'}<br><br>
                    <strong>Failed Services:</strong><br>
                    ${status.failed_services?.join(', ') || 'None'}<br><br>
                    <strong>Uptime:</strong> ${status.uptime?.toFixed(2)}s
                `;
                
                log(`üìä Status updated: ${status.running_services?.length || 0} running, ${status.failed_services?.length || 0} failed`, 'success');
            } catch (error) {
                log(`‚ùå Failed to get status: ${error.message}`, 'error');
                document.getElementById('service-status').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        // File Operations Functions
        async function writeFile() {
            try {
                const path = document.getElementById('file-path').value;
                const content = document.getElementById('file-content').value;
                
                log(`Writing to ${path}...`);
                await unhinged.file.write(path, content);
                log(`‚úÖ File written successfully`, 'success');
                
                document.getElementById('file-output').innerHTML = `<span class="success">File written to ${path}</span>`;
            } catch (error) {
                log(`‚ùå Failed to write file: ${error.message}`, 'error');
                document.getElementById('file-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        async function readFile() {
            try {
                const path = document.getElementById('file-path').value;
                
                log(`Reading ${path}...`);
                const content = await unhinged.file.read(path);
                
                document.getElementById('file-content').value = content;
                document.getElementById('file-output').innerHTML = `<span class="success">File read successfully</span>`;
                log(`üìñ File read successfully`, 'success');
            } catch (error) {
                log(`‚ùå Failed to read file: ${error.message}`, 'error');
                document.getElementById('file-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        async function checkFileExists() {
            try {
                const path = document.getElementById('file-path').value;
                
                log(`Checking if ${path} exists...`);
                const exists = await unhinged.file.exists(path);
                
                const message = exists ? `‚úÖ File exists` : `‚ùå File does not exist`;
                document.getElementById('file-output').innerHTML = `<span class="${exists ? 'success' : 'warning'}">${message}</span>`;
                log(message, exists ? 'success' : 'warning');
            } catch (error) {
                log(`‚ùå Failed to check file: ${error.message}`, 'error');
                document.getElementById('file-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        async function deleteFile() {
            try {
                const path = document.getElementById('file-path').value;
                
                log(`Deleting ${path}...`);
                await unhinged.file.remove(path);
                
                document.getElementById('file-output').innerHTML = `<span class="success">File deleted successfully</span>`;
                log(`üóëÔ∏è File deleted successfully`, 'success');
            } catch (error) {
                log(`‚ùå Failed to delete file: ${error.message}`, 'error');
                document.getElementById('file-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        // Network Functions
        async function pingHost() {
            try {
                const host = document.getElementById('ping-host').value;
                
                log(`Pinging ${host}...`);
                const result = await unhinged.network.ping(host, 4);
                
                document.getElementById('network-output').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                log(`üèì Ping completed`, 'success');
            } catch (error) {
                log(`‚ùå Ping failed: ${error.message}`, 'error');
                document.getElementById('network-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        async function curlUrl() {
            try {
                const url = document.getElementById('curl-url').value;
                
                log(`Curling ${url}...`);
                const result = await unhinged.network.curl(url);
                
                document.getElementById('network-output').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                log(`üåç Curl completed`, 'success');
            } catch (error) {
                log(`‚ùå Curl failed: ${error.message}`, 'error');
                document.getElementById('network-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        // System Functions
        async function getSystemInfo() {
            try {
                log('Getting system info...');
                const info = await unhinged.system.info();
                
                document.getElementById('system-output').innerHTML = `<pre>${JSON.stringify(info, null, 2)}</pre>`;
                log(`üíª System info retrieved`, 'success');
            } catch (error) {
                log(`‚ùå Failed to get system info: ${error.message}`, 'error');
                document.getElementById('system-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        async function getSystemResources() {
            try {
                log('Getting resource usage...');
                const resources = await unhinged.system.resources();
                
                document.getElementById('system-output').innerHTML = `<pre>${JSON.stringify(resources, null, 2)}</pre>`;
                log(`üìà Resource usage retrieved`, 'success');
            } catch (error) {
                log(`‚ùå Failed to get resources: ${error.message}`, 'error');
                document.getElementById('system-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        async function listDirectory() {
            try {
                log('Listing /tmp directory...');
                const files = await unhinged.fs.ls('/tmp');
                
                document.getElementById('system-output').innerHTML = `
                    <strong>Files in /tmp:</strong><br>
                    ${files.map(file => `‚Ä¢ ${file}`).join('<br>')}
                `;
                log(`üìÇ Directory listed: ${files.length} items`, 'success');
            } catch (error) {
                log(`‚ùå Failed to list directory: ${error.message}`, 'error');
                document.getElementById('system-output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        }
        
        // Initialize
        log('üéØ Unhinged SDK Demo initialized', 'success');
        log('Click buttons to test system operations', 'info');
    </script>
</body>
</html>
