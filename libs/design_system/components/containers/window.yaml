# @llm-type component.spec
# @llm-does platform-agnostic window container component specification for application windows
# @llm-rule window specifications must be platform-agnostic describing semantic behavior not implementation
component:
  id: "window"
  name: "Application Window"
  category: "container"
  
  description: |
    Top-level container component that provides the main application window with standard
    window management capabilities including dragging, resizing, and state management.
    Serves as the root container for application content with proper focus management,
    keyboard navigation, and accessibility support.
    
    Use for main application windows, dialog windows, or any top-level interface that
    requires window management functionality. Integrates with platform window managers
    while maintaining consistent behavior across platforms.

  interface:
    properties:
      title:
        type: "string"
        required: true
        description: "Window title displayed in title bar and used for accessibility"
      
      width:
        type: "number"
        default: 800
        min: 320
        description: "Default window width in pixels"
      
      height:
        type: "number"
        default: 600
        min: 240
        description: "Default window height in pixels"
      
      min_width:
        type: "number"
        default: 320
        description: "Minimum allowed window width in pixels"
      
      min_height:
        type: "number"
        default: 240
        description: "Minimum allowed window height in pixels"
      
      resizable:
        type: "boolean"
        default: true
        description: "Whether window can be resized by user"
      
      decorated:
        type: "boolean"
        default: true
        description: "Whether to show platform window decorations (title bar, controls)"
      
      modal:
        type: "boolean"
        default: false
        description: "Whether window blocks interaction with other windows"
      
      always_on_top:
        type: "boolean"
        default: false
        description: "Whether window stays above other windows"
    
    states:
      default:
        description: "Initial window state when first created"
        visual_tokens: ["colors.surface.default", "elevation.layers.base"]
        triggers: ["component_mount"]

      normal:
        description: "Standard window state, user can interact normally"
        visual_tokens: ["colors.surface.default", "elevation.layers.base"]
        triggers: ["window_restore", "default"]

      maximized:
        description: "Window fills entire screen or available space"
        visual_tokens: ["colors.surface.default", "elevation.layers.base"]
        triggers: ["maximize_button", "double_click_titlebar"]
        transitions: ["normal", "minimized"]

      minimized:
        description: "Window hidden but available in taskbar/dock"
        visual_tokens: ["elevation.layers.base"]
        triggers: ["minimize_button", "window_hide"]
        transitions: ["normal", "maximized"]

      fullscreen:
        description: "Window occupies entire screen without decorations"
        visual_tokens: ["colors.surface.default"]
        triggers: ["fullscreen_key", "fullscreen_method"]
        transitions: ["normal"]

      focused:
        description: "Window has keyboard focus and is active"
        visual_tokens: ["colors.surface.default", "colors.interactive.focus"]
        triggers: ["window_focus", "user_click"]
        transitions: ["unfocused"]

      unfocused:
        description: "Window does not have keyboard focus"
        visual_tokens: ["colors.surface.default"]
        triggers: ["focus_other_window", "window_blur"]
        transitions: ["focused"]
    
    events:
      resize:
        description: "Window size changed by user or programmatically"
        payload:
          width: "number"
          height: "number"
          source: "string"
      
      state_changed:
        description: "Window state changed (normal, maximized, minimized, fullscreen)"
        payload:
          old_state: "string"
          new_state: "string"
          timestamp: "number"
      
      close_requested:
        description: "User requested window closure (X button, Alt+F4, etc.)"
        payload:
          can_cancel: "boolean"
          source: "string"
      
      focus_changed:
        description: "Window gained or lost focus"
        payload:
          focused: "boolean"
          timestamp: "number"
      
      move:
        description: "Window position changed by dragging or programmatically"
        payload:
          x: "number"
          y: "number"
          source: "string"

  styling:
    default_state:
      background: "colors.surface.default"
      border: "colors.border.subtle"
      border_width: "elevation.border.thin"
      border_radius: "elevation.radius.md"
      box_shadow: "elevation.shadows.2"
      z_index: "elevation.layers.base"

    state_overrides:
      focused:
        border: "colors.interactive.focus"
        border_width: "elevation.border.medium"
        box_shadow: "elevation.shadows.3"

      modal:
        z_index: "elevation.layers.modal"
        box_shadow: "elevation.shadows.4"

      fullscreen:
        border: "none"
        border_radius: "elevation.radius.none"
        box_shadow: "none"

  composition:
    is_leaf: false
    can_contain: ["primitive", "container", "complex"]
    required_context: []
    layout_type: "custom"

  accessibility:
    keyboard_support: true
    screen_reader_label: "required"
    focus_indicator: "required"
    contrast_requirement: "WCAG_AA"
    
    keyboard_interactions:
      - key: "Alt+F4"
        action: "close_window"
      - key: "F11"
        action: "toggle_fullscreen"
      - key: "Alt+Space"
        action: "show_window_menu"
      - key: "Tab"
        action: "focus_next_element"
      - key: "Shift+Tab"
        action: "focus_previous_element"
    
    aria_attributes:
      - "aria-label or title property required"
      - "role=application for complex windows"
      - "aria-modal=true when modal property is true"

  examples:
    - name: "Main application window"
      description: "Standard resizable application window"
      properties:
        title: "Unhinged Platform"
        width: 1200
        height: 800
        resizable: true
        decorated: true
    
    - name: "Dialog window"
      description: "Modal dialog for user input"
      properties:
        title: "Settings"
        width: 600
        height: 400
        modal: true
        resizable: false
    
    - name: "Utility window"
      description: "Always-on-top utility window"
      properties:
        title: "Quick Actions"
        width: 300
        height: 200
        always_on_top: true
        decorated: false

metadata:
  version: "1.0.0"
  last_updated: "2025-10-31"
  design_review: "pending"
  implementation_status:
    gtk4: "pending"
    alpine_native: "pending"
