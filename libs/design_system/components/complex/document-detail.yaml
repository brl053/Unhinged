# @llm-type component.spec
# @llm-does View and edit a single document with full metadata
# @llm-key Main document detail view

component:
  id: "document-detail"
  name: "Document Detail"
  category: "complex"
  
  description: |
    View and edit a single document with full metadata, properties, and content.
    Supports read-only and edit modes with unsaved changes tracking.

  interface:
    properties:
      document:
        type: "object"
        required: true
        description: "Full document data"
      
      document_id:
        type: "string"
        required: true
        description: "Document identifier"
      
      is_editing:
        type: "boolean"
        default: false
        description: "Edit mode active"
      
      is_readonly:
        type: "boolean"
        default: false
        description: "Read-only mode"
      
      unsaved_changes:
        type: "boolean"
        default: false
        description: "Has unsaved changes"

    states:
      viewing:
        description: "Read-only view"
        visual_tokens: ["surface.default"]
      
      editing:
        description: "Edit mode"
        visual_tokens: ["surface.elevated"]
        triggers: ["is_editing_true"]
      
      saving:
        description: "Saving changes"
        visual_tokens: ["surface.elevated"]
      
      saved:
        description: "Changes saved"
        visual_tokens: ["feedback.success"]
      
      error:
        description: "Error occurred"
        visual_tokens: ["feedback.error"]

    events:
      edit_started:
        description: "User entered edit mode"
        payload: {}
      
      edit_cancelled:
        description: "User cancelled editing"
        payload: {}
      
      document_saved:
        description: "Changes saved"
        payload:
          document_id: "string"
          saved_at: "string"
      
      property_changed:
        description: "Property modified"
        payload:
          property_name: "string"
          old_value: "any"
          new_value: "any"
      
      document_deleted:
        description: "Document deleted"
        payload:
          document_id: "string"

  styling:
    default_state:
      background: "surface.default"
      padding: "sp.3"
      gap: "sp.3"
    
    state_overrides:
      editing:
        background: "surface.elevated"
      
      error:
        border_left: ["border.thick", "feedback.error"]

  composition:
    is_leaf: false
    can_contain: ["document-header", "document-properties", "document-content", "document-footer"]
    layout_type: "box"

  accessibility:
    keyboard_support: true
    screen_reader_label: "required"
    focus_indicator: "required"
    contrast_requirement: "WCAG_AA"
    
    keyboard_interactions:
      - key: "Ctrl+S"
        action: "save_document"
      - key: "Escape"
        action: "cancel_edit"

metadata:
  version: "1.0.0"
  implementation_status:
    gtk4: "pending"

