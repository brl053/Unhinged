# Text Editor Component Specification
# Platform-agnostic definition for multi-line text editing component

component:
  id: "text-editor"
  name: "Text Editor"
  category: "complex"
  
  description: |
    Multi-line text input component with optional features like line numbers,
    syntax highlighting, and word wrapping. Suitable for code editing, 
    document editing, and large text input scenarios.
    
    Provides rich text editing capabilities while maintaining accessibility
    and keyboard navigation standards.

  interface:
    properties:
      content:
        type: "string"
        default: ""
        description: "Current text content of the editor"
      
      placeholder:
        type: "string"
        default: ""
        description: "Hint text shown when editor is empty"
      
      read_only:
        type: "boolean"
        default: false
        description: "When true, content cannot be modified"
      
      show_line_numbers:
        type: "boolean"
        default: false
        description: "Display line numbers in left gutter"
      
      word_wrap:
        type: "boolean"
        default: true
        description: "Wrap long lines to fit editor width"
      
      language:
        type: "enum"
        values: ["plain", "json", "yaml", "python", "javascript", "sql", "markdown", "xml", "css"]
        default: "plain"
        description: "Language for syntax highlighting and validation"
      
      tab_size:
        type: "number"
        default: 2
        min: 1
        max: 8
        description: "Number of spaces for tab indentation"
      
      auto_indent:
        type: "boolean"
        default: true
        description: "Automatically indent new lines based on context"
      
      show_whitespace:
        type: "boolean"
        default: false
        description: "Visualize spaces, tabs, and line endings"
      
      max_length:
        type: "number"
        required: false
        description: "Maximum number of characters allowed"
      
      spell_check:
        type: "boolean"
        default: false
        description: "Enable spell checking for text content"
    
    states:
      default:
        description: "Ready for text input"
        visual_tokens: ["surface.default", "text.primary", "border.default"]
      
      focused:
        description: "Keyboard focus active, cursor visible"
        visual_tokens: ["border.medium", "interactive.focus"]
        triggers: ["click", "keyboard_focus", "programmatic_focus"]
      
      editing:
        description: "User actively typing or modifying content"
        visual_tokens: ["surface.default", "text.primary"]
        triggers: ["text_input", "key_press"]
      
      error:
        description: "Validation error or syntax error state"
        visual_tokens: ["border.medium", "feedback.error"]
        triggers: ["validation_failed", "syntax_error"]
      
      loading:
        description: "Content being loaded or processed"
        visual_tokens: ["surface.default", "text.disabled"]
        triggers: ["content_loading"]
      
      read_only:
        description: "Content display only, no editing allowed"
        visual_tokens: ["surface.subtle", "text.secondary"]
        triggers: ["read_only_property_true"]
    
    events:
      content_changed:
        description: "Text content has been modified"
        payload:
          content: "string"
          line: "number"
          column: "number"
          change_type: "enum[insert|delete|replace]"
      
      selection_changed:
        description: "Text selection has changed"
        payload:
          selection: "string"
          start_line: "number"
          start_column: "number"
          end_line: "number"
          end_column: "number"
      
      cursor_moved:
        description: "Cursor position changed"
        payload:
          line: "number"
          column: "number"
      
      focus:
        description: "Editor gained keyboard focus"
        payload: {}
      
      blur:
        description: "Editor lost keyboard focus"
        payload: {}
      
      validation_error:
        description: "Content validation failed"
        payload:
          errors: "array"
          line: "number"
          message: "string"

  styling:
    default_state:
      background: "surface.default"
      text_color: "text.primary"
      border: ["border.thin", "border.default"]
      border_radius: "radius.sm"
      padding: "sp.3"
      font: "type.code"
      font_size: "14px"
      line_height: "1.5"
      min_height: "120px"
    
    gutter_styling:
      background: "surface.subtle"
      text_color: "text.tertiary"
      border_right: ["border.thin", "border.subtle"]
      padding: ["sp.1", "sp.2"]
      width: "auto"  # Based on line count
    
    cursor_styling:
      color: "text.primary"
      width: "1px"
      blink_duration: "1s"
    
    selection_styling:
      background: "interactive.selection"
      opacity: 0.3
    
    syntax_highlighting:
      keyword:
        color: "syntax.keyword"
        font_weight: "medium"
      
      string:
        color: "syntax.string"
      
      comment:
        color: "syntax.comment"
        font_style: "italic"
      
      number:
        color: "syntax.number"
      
      operator:
        color: "syntax.operator"
      
      function:
        color: "syntax.function"
        font_weight: "medium"
    
    state_overrides:
      focused:
        border: ["border.medium", "interactive.focus"]
        ring: ["border.thin", "interactive.focus"]
        ring_offset: "1px"
      
      error:
        border: ["border.medium", "feedback.error"]
        background: "feedback.error"
        background_opacity: 0.05
      
      read_only:
        background: "surface.subtle"
        cursor: "default"
      
      loading:
        cursor: "wait"
        opacity: 0.7

  composition:
    is_leaf: true
    can_contain: []
    required_context: ["design_tokens"]
    layout_type: "custom"

  accessibility:
    keyboard_support: true
    screen_reader_label: "required"
    focus_indicator: "required"
    contrast_requirement: "WCAG_AA"
    
    keyboard_interactions:
      - key: "Tab"
        action: "insert_tab_or_focus_next"
        context: "depends_on_tab_behavior_setting"
      - key: "Shift+Tab"
        action: "remove_indent_or_focus_previous"
      - key: "Enter"
        action: "insert_newline_with_auto_indent"
      - key: "Ctrl+A"
        action: "select_all"
      - key: "Ctrl+C"
        action: "copy_selection"
      - key: "Ctrl+V"
        action: "paste_content"
      - key: "Ctrl+X"
        action: "cut_selection"
      - key: "Ctrl+Z"
        action: "undo"
      - key: "Ctrl+Y"
        action: "redo"
      - key: "Ctrl+F"
        action: "open_find_dialog"
      - key: "Home"
        action: "move_to_line_start"
      - key: "End"
        action: "move_to_line_end"
      - key: "Ctrl+Home"
        action: "move_to_document_start"
      - key: "Ctrl+End"
        action: "move_to_document_end"
    
    screen_reader_support:
      - "Announce line numbers when enabled"
      - "Announce cursor position changes"
      - "Announce selection changes"
      - "Support text navigation by word/line/paragraph"

  examples:
    - name: "Basic text editor"
      description: "Simple multi-line text input"
      properties:
        placeholder: "Enter your text here..."
        word_wrap: true
    
    - name: "Code editor"
      description: "Editor configured for code editing"
      properties:
        language: "python"
        show_line_numbers: true
        word_wrap: false
        tab_size: 4
        auto_indent: true
    
    - name: "JSON editor"
      description: "Editor for JSON data with validation"
      properties:
        language: "json"
        show_line_numbers: true
        auto_indent: true
        tab_size: 2
    
    - name: "Read-only display"
      description: "Display code or text without editing"
      properties:
        read_only: true
        language: "yaml"
        show_line_numbers: true
    
    - name: "Documentation editor"
      description: "Editor for markdown documentation"
      properties:
        language: "markdown"
        word_wrap: true
        spell_check: true
        show_whitespace: false

metadata:
  version: "1.0.0"
  last_updated: "2025-01-27"
  design_review: "approved"
  complexity: "high"
  implementation_status:
    gtk4: "pending"
    react: "pending"
    kotlin: "pending"
    c: "pending"
